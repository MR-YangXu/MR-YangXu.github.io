import{_ as p,r as c,o as l,c as i,b as s,d as a,e as t,a as o}from"./app.6788eeee.js";const u={},r={class:"custom-container tip"},d={href:"https://github.com/kangyana/daily-question/issues/105",target:"_blank",rel:"noopener noreferrer"},m={class:"custom-container tip"},k={href:"https://github.com/kangyana",target:"_blank",rel:"noopener noreferrer"},v={href:"https://github.com/shfshanyue/node-examples/blob/master/engineering/webpack/cjs/example/main.js",target:"_blank",rel:"noopener noreferrer"},b={class:"custom-container tip"},_={href:"https://github.com/kangyana",target:"_blank",rel:"noopener noreferrer"},y={href:"https://rollupjs.org/repl/?version=2.62.0&shareable=JTdCJTIybW9kdWxlcyUyMiUzQSU1QiU3QiUyMm5hbWUlMjIlM0ElMjJtYWluLmpzJTIyJTJDJTIyY29kZSUyMiUzQSUyMmltcG9ydCUyMG5hbWUlMjBmcm9tJTIwJy4lMkZuYW1lJyU1Q25jb25zb2xlLmxvZyhuYW1lKSUyMiUyQyUyMmlzRW50cnklMjIlM0F0cnVlJTdEJTJDJTdCJTIybmFtZSUyMiUzQSUyMm5hbWUuanMlMjIlMkMlMjJjb2RlJTIyJTNBJTIyY29uc3QlMjBuYW1lJTIwJTNEJTIwJ3NoYW55dWUnJTVDbmV4cG9ydCUyMGRlZmF1bHQlMjBuYW1lJTIyJTJDJTIyaXNFbnRyeSUyMiUzQWZhbHNlJTdEJTVEJTJDJTIyb3B0aW9ucyUyMiUzQSU3QiUyMmZvcm1hdCUyMiUzQSUyMmVzJTIyJTJDJTIybmFtZSUyMiUzQSUyMm15QnVuZGxlJTIyJTJDJTIyYW1kJTIyJTNBJTdCJTIyaWQlMjIlM0ElMjIlMjIlN0QlMkMlMjJnbG9iYWxzJTIyJTNBJTdCJTdEJTdEJTJDJTIyZXhhbXBsZSUyMiUzQW51bGwlN0Q=",target:"_blank",rel:"noopener noreferrer"};function g(h,n){const e=c("ExternalLinkIcon");return l(),i("div",null,[n[13]||(n[13]=s("h1",{id:"\u3010q105\u3011webpack-\u7684-runtime-\u505A\u4E86\u4EC0\u4E48\u4E8B\u60C5",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u3010q105\u3011webpack-\u7684-runtime-\u505A\u4E86\u4EC0\u4E48\u4E8B\u60C5","aria-hidden":"true"},"#"),a(" \u3010Q105\u3011webpack \u7684 runtime \u505A\u4E86\u4EC0\u4E48\u4E8B\u60C5")],-1)),s("div",r,[n[2]||(n[2]=s("p",{class:"custom-container-title"},"Issue",-1)),s("p",null,[n[1]||(n[1]=a("\u6B22\u8FCE\u5728 Gtihub Issue \u4E2D\u56DE\u7B54\u6B64\u95EE\u9898: ")),s("a",d,[n[0]||(n[0]=a("Issue 105")),t(e)])])]),s("div",m,[n[5]||(n[5]=s("p",{class:"custom-container-title"},"Author",-1)),s("p",null,[n[4]||(n[4]=a("\u56DE\u7B54\u8005: ")),s("a",k,[n[3]||(n[3]=a("kangyana")),t(e)])])]),n[14]||(n[14]=o('<h2 id="_1-webpack-runtime" tabindex="-1"><a class="header-anchor" href="#_1-webpack-runtime" aria-hidden="true">#</a> 1. Webpack Runtime</h2><p>webpack \u7684 runtime\uFF0C\u4E5F\u5C31\u662F webpack \u6700\u540E\u751F\u6210\u7684 <strong>\u8FD0\u884C\u65F6\u4EE3\u7801</strong>\uFF0C\u505A\u4E86\u4EE5\u4E0B\u4E09\u4EF6\u4E8B:</p><ul><li><strong><strong>webpack_modules</strong></strong>\uFF1A\u7EF4\u62A4\u4E00\u4E2A\u6240\u6709\u6A21\u5757\u7684\u6570\u7EC4\u3002 \u5C06\u5165\u53E3\u6A21\u5757\u89E3\u6790\u4E3A AST\uFF0C\u6839\u636E AST \u6DF1\u5EA6\u4F18\u5148\u641C\u7D22\u6240\u6709\u7684\u6A21\u5757\uFF0C\u5E76\u6784\u5EFA\u51FA\u8FD9\u4E2A\u6A21\u5757\u6570\u7EC4\u3002 \u6BCF\u4E2A\u6A21\u5757\u90FD\u7531\u4E00\u4E2A\u5305\u88F9\u51FD\u6570 (<code>module</code>, <code>module.exports</code>, <code>__webpack_require__</code>) \u5BF9\u6A21\u5757\u8FDB\u884C\u5305\u88F9\u6784\u6210\u3002</li><li><strong><strong>webpack_require</strong>(moduleId)</strong>\uFF1A\u624B\u52A8\u5B9E\u73B0\u52A0\u8F7D\u4E00\u4E2A\u6A21\u5757\u3002 \u5BF9\u5DF2\u52A0\u8F7D\u8FC7\u7684\u6A21\u5757\u8FDB\u884C\u7F13\u5B58\uFF0C\u5BF9\u672A\u52A0\u8F7D\u8FC7\u7684\u6A21\u5757\uFF0C\u6267\u884C id \u5B9A\u4F4D\u5230 <code>__webpack_modules__</code> \u4E2D\u7684\u5305\u88F9\u51FD\u6570\uFF0C\u6267\u884C\u5E76\u8FD4\u56DE<code>module.exports</code>\uFF0C\u5E76\u7F13\u5B58\u3002</li><li><strong><strong>webpack_require</strong>(0)</strong>\uFF1A\u8FD0\u884C\u7B2C\u4E00\u4E2A\u6A21\u5757\uFF0C\u5373\u8FD0\u884C\u5165\u53E3\u6A21\u5757\u3002</li></ul><p>\u53E6\u5916\uFF0C\u5F53\u6D89\u53CA\u5230\u591A\u4E2A chunk \u7684\u6253\u5305\u65B9\u5F0F\u4E2D\uFF0C\u6BD4\u5982 <code>code spliting</code>\uFF0Cwebpack \u4E2D\u4F1A\u4F7F\u7528 jsonp \u52A0\u8F7D chunk \u7684\u8FD0\u884C\u65F6\u4EE3\u7801\u3002</p>',4)),s("p",null,[n[7]||(n[7]=a("\u4EE5\u4E0B\u662F webpack runtime \u7684\u6700\u7B80\u4EE3\u7801\uFF0C\u914D\u7F6E\u793A\u4F8B\u53EF\u89C1 ")),s("a",v,[n[6]||(n[6]=a("node-examples")),t(e)])]),n[15]||(n[15]=o(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/******/</span> <span class="token keyword">var</span> __webpack_modules__ <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">,</span>
  <span class="token comment">/* 0 */</span> <span class="token comment">/* 1 */</span>
  <span class="token doc-comment comment">/***/ (module) =&gt; <span class="token punctuation">{</span>
    module.exports = (...args) =&gt; args.reduce((x, y) =&gt; x + y, 0);

    /***/</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token doc-comment comment">/******/</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/************************************************************************/</span>
<span class="token doc-comment comment">/******/</span> <span class="token comment">// The module cache</span>
<span class="token doc-comment comment">/******/</span> <span class="token keyword">var</span> __webpack_module_cache__ <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/******/</span>
<span class="token doc-comment comment">/******/</span> <span class="token comment">// The require function</span>
<span class="token doc-comment comment">/******/</span> <span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token parameter">moduleId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/******/</span> <span class="token comment">// Check if module is in cache</span>
  <span class="token doc-comment comment">/******/</span> <span class="token keyword">var</span> cachedModule <span class="token operator">=</span> __webpack_module_cache__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/******/</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cachedModule <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/******/</span> <span class="token keyword">return</span> cachedModule<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/******/</span>
  <span class="token punctuation">}</span>
  <span class="token doc-comment comment">/******/</span> <span class="token comment">// Create a new module (and put it into the cache)</span>
  <span class="token doc-comment comment">/******/</span> <span class="token keyword">var</span> module <span class="token operator">=</span> <span class="token punctuation">(</span>__webpack_module_cache__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/******/</span> <span class="token comment">// no module.id needed</span>
    <span class="token doc-comment comment">/******/</span> <span class="token comment">// no module.loaded needed</span>
    <span class="token doc-comment comment">/******/</span> <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token doc-comment comment">/******/</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/******/</span>
  <span class="token doc-comment comment">/******/</span> <span class="token comment">// Execute the module function</span>
  <span class="token doc-comment comment">/******/</span> __webpack_modules__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">(</span>
    module<span class="token punctuation">,</span>
    module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span>
    __webpack_require__
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/******/</span>
  <span class="token doc-comment comment">/******/</span> <span class="token comment">// Return the exports of the module</span>
  <span class="token doc-comment comment">/******/</span> <span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
  <span class="token doc-comment comment">/******/</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/******/</span>
<span class="token doc-comment comment">/************************************************************************/</span>
<span class="token keyword">var</span> __webpack_exports__ <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9 webpack runtime \u505A\u8FDB\u4E00\u6B65\u7684\u7CBE\u7B80\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> __webpack_modules__ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">__webpack_require__</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> m <span class="token operator">=</span> __webpack_modules__<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u52A8\u753B\u8868\u793A Webpack \u7684\u8F93\u5165\u8F93\u51FA\uFF1A</p><p><img src="https://cdn.jsdelivr.net/gh/shfshanyue/assets/2021-12-28/bundle-webpack.0693ce.gif" alt="Alt"></p>`,5)),s("div",b,[n[10]||(n[10]=s("p",{class:"custom-container-title"},"Author",-1)),s("p",null,[n[9]||(n[9]=a("\u56DE\u7B54\u8005: ")),s("a",_,[n[8]||(n[8]=a("kangyana")),t(e)])])]),n[16]||(n[16]=o(`<h2 id="_2-rollup" tabindex="-1"><a class="header-anchor" href="#_2-rollup" aria-hidden="true">#</a> 2. Rollup</h2><p>\u5728 Rollup \u4E2D\uFF0C\u5E76\u4E0D\u4F1A\u5C06\u6240\u6709\u6A21\u5757\u7F6E\u4E8E <code>modules</code> \u4E2D\u4F7F\u7528 Module Wrapper \u8FDB\u884C\u7EF4\u62A4\uFF0C<strong>\u5B83\u4EC5\u4EC5\u5C06\u6240\u6709\u6A21\u5757\u94FA\u5E73\u5C55\u5F00</strong>\u3002</p><p>\u8BD5\u4E3E\u4E00\u4F8B\uFF1A <strong>index.js</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> name <span class="token keyword">from</span> <span class="token string">&quot;./name&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>name.js</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;shanyue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,6)),s("p",null,[n[12]||(n[12]=a("\u5728\u6253\u5305\u540E\uFF0C\u76F4\u63A5\u628A\u6240\u6709\u6A21\u5757\u5E73\u94FA\u5C55\u5F00\u5373\u53EF\uFF0C\u53EF\u89C1")),s("a",y,[n[11]||(n[11]=a("\u5B9E\u65F6\u793A\u4F8B")),t(e)])]),n[17]||(n[17]=o(`<p><strong>output.js</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;shanyue&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u4E8E Rollup \u8FD9\u79CD\u65B9\u6848\uFF0C\u5F53\u4E24\u4E2A\u6A21\u5757\u4E2D\u53D1\u751F\u53D8\u91CF\u51B2\u7A81\u5982\u4F55\u89E3\u51B3\uFF1F \u5F88\u7B80\u5355\uFF0C\u76F4\u63A5\u91CD\u65B0\u547D\u540D\uFF0C\u770B\u793A\u4F8B\uFF1A</p><p><img src="https://cdn.jsdelivr.net/gh/shfshanyue/assets/2021-12-28/clipboard-9429.b9ad82.webp" alt="Alt"></p><p>\u4F7F\u7528\u52A8\u753B\u8868\u793A Rollup \u7684\u8F93\u5165\u8F93\u51FA\uFF1A</p><p><img src="https://raw.githubusercontent.com/shfshanyue/assets/master/2021-12-28/bundle-rollup.60cb6a.gif" alt="Alt"></p>`,6))])}const J=p(u,[["render",g],["__file","105.html.vue"]]);export{J as default};
